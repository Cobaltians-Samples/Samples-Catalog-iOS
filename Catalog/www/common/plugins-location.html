<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
        <link rel="stylesheet" type="text/css" href="css/styles.css"/>
    </head>
    <body class="theme_green">

        <div class="block">
            <p>Your location should appears in the space bellow. If not, check you correctly installed the plugin, check you device setting or the device logs for any clues.</p>
        </div>
        <div class="block">
            <p>Your location is : <b id="locationField" style="border:1px solid #ccc; padding:5px;">[waiting for plugin...]</b></p>

        </div>
        <script type="text/javascript" src="js/zepto.min.js"></script>
        <script type="text/javascript" src="../platform/cobalt.js"></script>


        <script type="text/javascript" src="js/cobalt.location.js"></script>
        <script type="text/javascript" src="js/setTimeoutWorkaround.js"></script>
        <script type="text/javascript" src="js/app.js"></script>

        <script>

            Zepto(function($){
                cobalt.init({
                    debug:app.debug,
                    debugInBrowser:app.debugInBrowser,
                    debugInDiv:app.debugInDiv,
                    plugins:{
                        location:{
                            foo : "bar",
                            onError:function(code, text){
                                if (! text){
                                    text = "No location found (may be user settings)"
                                }
                                document.getElementById('locationField').innerHTML=text;
                            }
                        }
                    }
                });

                cobalt.getLocation(function(position){
                    document.getElementById('locationField').innerHTML = JSON.stringify(position);
                })


                app.initPage('Location Plugin')

            })

        </script>

    </body>
</html>
